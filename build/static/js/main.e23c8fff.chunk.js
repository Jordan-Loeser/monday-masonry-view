(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[0],{41:function(n,t,e){n.exports=e(82)},46:function(n,t,e){},79:function(n,t,e){},82:function(n,t,e){"use strict";e.r(t);var a=e(0),r=e.n(a),i=e(3),o=e.n(i),s=(e(46),e(4)),u=e.n(s),c=e(8),l=e(5),d=e(7),m=e(14),h=e(26),f=e(27),g=e(37),p=e(36),v=e(1),b=e(28),w=e.n(b),x=e(2),I=e(29);function y(){var n=Object(v.a)(["\n  padding: 16px;\n  width: 100%;\n  box-sizing: border-box;\n  h2 {\n    margin: 0;\n    max-width: 180px;\n  }\n  ","\n"]);return y=function(){return n},n}function O(){var n=Object(v.a)(["\n  width: 100%;\n  display: block;\n"]);return O=function(){return n},n}function k(){var n=Object(v.a)(["\n  margin: 0 8px 8px 0;\n  margin: ",";\n  width: ",";\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0px 6px 20px -2px rgba(0, 0, 0, 0.2);\n  box-sizing: border-box;\n  overflow: hidden;\n  ",";\n  justify-content: flex-end;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  ","\n"]);return k=function(){return n},n}var j=x.a.div(k(),(function(n){var t=n.gutterSize;return"0 ".concat(t,"px ").concat(t,"px 0")}),(function(n){return"calc(".concat(100/n.numCols,"% - ").concat(n.gutterSize,"px)")}),(function(n){var t=n.hasImage,e=n.numCols;return t?"":"min-height: ".concat(72*(8-e),"px")}),(function(n){for(var t=n.numCols,e="",a=1;a<=t;a++)e+="&:nth-of-type(".concat(t,"n + ").concat(a,") { order: ").concat(a,"; }");return e})),E=x.a.img(O()),_=x.a.div(y(),(function(n){return n.isOverlay?"\n        position: absolute; \n        color: #fff; \n        text-shadow: 0px 0px 36px #000; \n        background: linear-gradient(0deg,rgba(0,0,0,0.24),transparent);\n      ":"h2 { margin-top: 48px }"})),C=function(n){var t=n.item,e=n.gutterSize,a=n.numCols,i=n.showName,o=n.onLoad,s=t.hasOwnProperty("image_url");return r.a.createElement(j,{id:"masonryCard",gutterSize:e,numCols:a,hasImage:s},s&&r.a.createElement(E,{onLoad:o,src:t.image_url,alt:t.name}),i&&r.a.createElement(_,{isOverlay:s},r.a.createElement("h2",null,t.name)))};function N(){var n=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n"]);return N=function(){return n},n}var S=x.a.div(N()),W=function(){return r.a.createElement(S,{"data-testid":"instructions"},r.a.createElement("h2",null,"There are no items to show! "),r.a.createElement("p",null,'Either select an "Image Column" or check "Show Items Without Images" to use this view.'))};e(78),e(79);function L(){var n=Object(v.a)(["\n  flex-basis: 100%;\n  width: 0;\n  margin: 0;\n  ","\n"]);return L=function(){return n},n}function z(){var n=Object(v.a)(["\n  display: flex;\n  flex-flow: column wrap;\n  height: ",";\n  width: 100%;\n  padding-left: ","px;\n  padding-top: ","px;\n  box-sizing: border-box;\n  align-content: flex-start;\n"]);return z=function(){return n},n}function H(){var n=Object(v.a)(["\n  width: 48px;\n  margin: 0 auto;\n  height: 100vh;\n"]);return H=function(){return n},n}var P=w()(),$=16,q=4,D=3,J=2,T=x.a.div(H()),A=x.a.div(z(),(function(n){return"".concat(n.containerHeight,"px")||!1}),$,$),Y=x.a.span(L(),(function(n){for(var t=n.numCols,e="",a=1;a<=t;a++)e+="&:nth-of-type(".concat(t,"n + ").concat(a,") { order: ").concat(a,"; }");return e})),B=function(n){Object(g.a)(e,n);var t=Object(p.a)(e);function e(n){var a;return Object(h.a)(this,e),(a=t.call(this,n)).state={loading:!1,settings:{},context:{},items:[],groups:[],containerHeight:1e3,windowWidth:window.innerWidth,showNonImageItems:!1,showItemNames:!1},a}return Object(f.a)(e,[{key:"parseItems",value:function(){var n=Object(m.a)(u.a.mark((function n(t){var e,a,r,i,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t.length){n.next=2;break}return n.abrupt("return",t);case 2:if(e=t[0].column_values,0!==(a=void 0===e?[]:e).length){n.next=5;break}return n.abrupt("return",t);case 5:if(r=JSON.parse(a[0].value),"LINK_TYPE"!==(i=r.hasOwnProperty("url")?"LINK_TYPE":r.hasOwnProperty("files")?"FILE_TYPE":null)){n.next=9;break}return n.abrupt("return",t.reduce((function(n,t){var e,a,r=null!==(e=null===(a=JSON.parse(t.column_values[0].value))||void 0===a?void 0:a.url)&&void 0!==e?e:null;return[].concat(Object(d.a)(n),[r?Object(l.a)(Object(l.a)({},t),{},{image_url:r}):t])}),[]));case 9:if("FILE_TYPE"!==i){n.next=14;break}return-1,o=t.reduce((function(n,t){var e,a,r=null!==(e=null===(a=JSON.parse(t.column_values[0].value))||void 0===a?void 0:a.files)&&void 0!==e?e:[];return[].concat(Object(d.a)(n),[r.length>0&&"true"===r[0].isImage?r[0].assetId:-1])}),[]),"\n        query ($assetIds: [Int]!) {\n          assets (ids: $assetIds) {\n            id\n            url\n          }\n        }\n      ",n.abrupt("return",P.api("\n        query ($assetIds: [Int]!) {\n          assets (ids: $assetIds) {\n            id\n            url\n          }\n        }\n      ",{variables:{assetIds:o.filter((function(n){return-1!==n}))}}).then((function(n){var e=n.data.assets.reduce((function(n,t){return Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},t.id,t.url))}),{});return t.reduce((function(n,t,a){return-1===o[a]?[].concat(Object(d.a)(n),[t]):[].concat(Object(d.a)(n),[Object(l.a)(Object(l.a)({},t),{},{image_url:e[o[a]]})])}),[])})));case 14:return n.abrupt("return",t);case 15:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},{key:"pullItems",value:function(){var n,t,e,a=this,r=0!==Object.keys(null!==(n=null===(t=this.state.settings)||void 0===t?void 0:t.image_column)&&void 0!==n?n:{}).length;this.setState({loading:!0}),P.api("\n      query ($boardIds: [Int], $columnIds: [String]) {\n        boards(ids:$boardIds) {\n          groups{\n            id\n          title\n          } \n          items {\n            name\n            column_values(ids:$columnIds) {\n              value\n            }\n          }\n        }\n      }\n    ",{variables:{boardIds:this.state.context.boardIds,columnIds:r?Object.keys(null===(e=this.state.settings)||void 0===e?void 0:e.image_column):[""]}}).then(function(){var n=Object(m.a)(u.a.mark((function n(t){var e,r,i,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.data.boards[0],r=e.groups,i=e.items,n.next=3,a.parseItems(i);case 3:o=n.sent,a.setState({groups:r,items:o,loading:!1});case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var n=this;window.addEventListener("resize",this.updateWindowDimensions.bind(this)),P.listen("settings",(function(t){var e,a,r,i;n.setState({settings:t.data,showNonImageItems:null!==(e=null===(a=t.data)||void 0===a?void 0:a.view_settings.includes("show_non_image"))&&void 0!==e&&e,showItemNames:null!==(r=null===(i=t.data)||void 0===i?void 0:i.view_settings.includes("show_name"))&&void 0!==r&&r},n.pullItems)})),P.listen("context",(function(t){n.setState({context:t.data},n.pullItems)})),this.setContainerHeight()}},{key:"componentDidUpdate",value:function(){this.setContainerHeight()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions.bind(this))}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"getNumCols",value:function(){var n;return(null===(n=this.state.settings)||void 0===n?void 0:n.override_num_cols)&&this.state.settings.hasOwnProperty("num_cols")?parseInt(this.state.settings.num_cols):window.innerWidth>=1024?q:window.innerWidth>=768?D:J}},{key:"setContainerHeight",value:function(){var n=Array.from(document.querySelectorAll("#masonryCard")),t=Math.ceil(n.length/this.getNumCols()),e=n.map((function(n){return n.offsetHeight+$})).sort((function(n,t){return t-n})),a=$+e.slice(0,t).reduce((function(n,t){return n+t}),0);a!==this.state.containerHeight&&this.setState({containerHeight:a})}},{key:"handleImageLoaded",value:function(){this.setContainerHeight()}},{key:"render",value:function(){var n=this,t=this.getNumCols(),e=this.state.showNonImageItems&&this.state.showItemNames?this.state.items:this.state.items.filter((function(n){return n.hasOwnProperty("image_url")}));return r.a.createElement("div",{className:"App"},this.state.loading?r.a.createElement(T,null,r.a.createElement(I.Loader,{svgClassName:"loader-size-md"})):this.state.showNonImageItems||0!==e.length?r.a.createElement(A,{containerHeight:this.state.containerHeight},e.map((function(e,a){return r.a.createElement(C,{key:"card-".concat(a),item:e,gutterSize:$,numCols:t,showName:n.state.showItemNames,onLoad:n.handleImageLoaded.bind(n)})})),Array(t-1).fill().map((function(n,e){return r.a.createElement(Y,{key:"break-".concat(e),numCols:t})}))):r.a.createElement(W,null))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.e23c8fff.chunk.js.map